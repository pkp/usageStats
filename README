=============================================================
=== Usage Statistics Plugin
=== Version: 1.0
=============================================================


About
-----
This plugin implements usage statistics logging and processing, and also 
default reports to retrieve statistics related to the journal i.e. press, 
articles i.e. monographs and article i.e. monograph files.

Usually an usage statistic event is a page view (journal i.e. press catalog index page,
abstract article i.e. monograph page, etc) or a file download (article i.e. monograph file downloads).

This plugin can also log statistics aggregated by the geo location of the
user. To activate this option, take a look at the INSTALLATION section of
this document.

License
-------
This plugin is licensed under the GNU General Public License v2. See the file
LICENSE for the complete terms of this license.

System Requirements
-------------------
The default usage of this plugin is automatic and doesn't require any other
extra requirement other than OJS i.e. OMP already does.

If you want to learn on how to process external log files, like apache access
files, please refer to https://pkp.sfu.ca/wiki/index.php?title=PKP_Statistics_Framework#External_access_log_files_alternative


Installation
------------
The plugin is integrated as a submodule in the OJS i.e. OMP.
 
To enable the plugin go as admin user either to  
- Administration > Site Settings > Plugins > Generic Plugins
  or to 
- Settings > Website > Plugins > Generic Plugins
...and select the Enable checkbox beside "Usage Statistics Plugin"

The only needed additional step depends on whether you want to have geo 
location data in your statistics or not. If that's the case, follow these
steps:


Signup for Geolite2 Free Geolocation Data

1 - You will need a free GeoLite2 account to download the GeoLite2 databases. 
    For signing up, follow the instructions at 
    https://dev.maxmind.com/geoip/geolite2-free-geolocation-data#accessing-geolite2-free-geolocation-data
2 - For Linux, it is recommended to generate a license key, which can be used to automate
    Geolite2 binary database downloads with the geoipupdate program

Linux
1 - Let your Linux administrator install the geoipupdate program using package manager of 
    your Linux distribution. The geoipupdate program is usually stored in /usr/bin/geoipupdate
2 - open a shell prompt
3 - create a directory geoip outside of your OJS i.e. OMP installationâ€™s base directory
4 - obtain the GeoIP.conf file with your license key according to 
    https://dev.maxmind.com/geoip/updating-databases/#2-obtain-geoipconf-with-account-information
    and store it in your geoip directory created in step 4
5 - give {ojs_root}/plugins/generic/usageStats write access for the apache user, e.g. 
    chmod g+w {ojs_root}/plugins/generic/usageStats
6 - /usr/bin/geoipupdate -v -f {geoip_directory}/GeoIP.conf -d {ojs_root}/plugins/generic/usageStats
    This downloads the GeoLite2-ASN.mmdb, GeoLite2-City.mmdb and GeoLite2-Country.mmdb databases 
    to your plugins/generic/usageStats directory
7 - You may automate monthly updates of your Geolite2 databases using a cronjob. Add an entry to the 
    cron table like this:
    # Download GeoIP2 databases every month
    30 7 1 * *	/usr/bin/geoipupdate -v -f {geoip_directory}/GeoIP.conf -d {ojs_root}/plugins/generic/usageStats 
    In order that this works, give the apache user write permissions for the following files:
    {ojs_root}/plugins/generic/usageStats/.geoipupdate.lock
    {ojs_root}/plugins/generic/usageStats/GeoLite2-ASN.mmdb
    {ojs_root}/plugins/generic/usageStats/GeoLite2-City.mmdb
    {ojs_root}/plugins/generic/usageStats/GeoLite2-Country.mmdb


Windows
(add steps here)


Management
------------


Contact/Support
---------------
Documentation, bug listings, and updates can be found on this plugin's homepage
at <http://github.com/pkp/usageStats>.
